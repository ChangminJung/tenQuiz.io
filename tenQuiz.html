<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>Tables / General - NiceAdmin Bootstrap Template</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="/img/favicon.png" rel="icon">
  <link href="/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.gstatic.com" rel="preconnect">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="./bootstrap.min.css" rel="stylesheet">


  <!-- Template Main CSS File -->
  <link href="./style.css" rel="stylesheet">

  <style>
    table,
    tr,
    td,
    th {
      /* 테이블의 선을 합친다. */
      text-align: center;
      border: solid 1px;
      border-collapse: collapse;
    }
    *, ::after, ::before{
      box-sizing: initial;
    }
    #tb{
    }

    tr{
      height: 50px;
    }
    .table-secondary{
      background-color: #d1d2d4;
    }

    td {
      height: 50px;
      width: 50px;
      font-size: x-large;
    }


    .aInput {
      width: 60%;
      height: 60%;
      border: 0.1px solid #408cfc;
      text-align: center;
      border-radius: 7px;
      font-size: large;

    }

    .tbDiv{
      width:20px;
      height:20px;
      border-radius:50%;
      background-color:#0d6efd;
      position: absolute;
      margin-top: -10px;
      /* margin-left: 35px; */

    }

    .divCard1{
      position: absolute;
      z-index: 11111;
      max-width: 300px;
      max-height: 300px;
      margin: 50px;
    }

    .divCard2{
      position: absolute;
      z-index: 11111;
      max-width: 300px;
      max-height: 300px;
      top:100px;
      margin: 50px;
    }

    .divCard3{
      position: absolute;
      z-index: 11111;
      max-width: 300px;
      max-height: 300px;
      top:100px;
      margin: 50px;
    }

#turtle {
            position: absolute;
        }

        #light {
            width: 30px;
            box-sizing: initial;
            border-bottom: 100px solid #ffc720;
            border-left: 50px solid transparent;
            border-right: 50px solid transparent;
            height: 3px;
            opacity: 0.3;
            display: none;
            position: absolute;
        }

        .alpha {
            height: 30px;
            margin: -2.2px;
            position: absolute;
        }
    
  </style>

</head>

<body>

<header data-th-include="./personalHeader.html"></header>
<!-- ======= Header ======= -->


<header data-th-include="./personalSidebar.html"></header>
<!-- ======= Sidebar ======= -->

 <main id="main" class="main">

    <section class="section">
      <div class="row">
        <div class="col-lg-12">

          <div class="card">
            <div class="card-body">

              <!-- Table Variants -->
              <table  id="tb">

              </table>
              <!-- End Table Variants -->

            </div>
          </div>

        </div>


      </div>
    </section>

  </main><!-- End #main -->

  <!-- ======= Footer ======= -->
  <footer id="footer" class="footer">
    <div class="copyright">
      &copy; Copyright <strong><span>NiceAdmin</span></strong>. All Rights Reserved
    </div>
    <div class="credits">
      <!-- All the links in the footer should remain intact. -->
      <!-- You can delete the links only if you purchased the pro version. -->
      <!-- Licensing information: https://bootstrapmade.com/license/ -->
      <!-- Purchase the pro version with working PHP/AJAX contact form: https://bootstrapmade.com/nice-admin-bootstrap-admin-html-template/ -->
      Designed by <a href="https://bootstrapmade.com/">BootstrapMade</a>
    </div>
  </footer><!-- End Footer -->

  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Vendor JS Files -->
  <script src="./bootstrap.bundle.min.js"></script>



<script src="https://code.jquery.com/jquery-3.6.1.js"></script>

<script>

  // 테이블 만들기



  // 십자 말풀이 밀집도
  let groupNum = 4;




  let a1 = 'wage';
  let a2 = 'occupation';
  let a3 = 'certification';
  let a4 = 'recruit';
  let a5 = 'payroll';
  let a6 = 'degree';
  let a7 = 'entitle';
  let a8 = 'consultant';
  let a9 = 'apprehensive';
  let a10 = 'specialize';
  let a11 = 'appeal';
  let a12 = 'prospective';
  let a13 = 'proficiency';
  let a14 = 'familiar';
  let a15 = 'diligent';
  let a16 = 'managerial';
  let a17 = 'lack';
  let a18 = 'employment';
  let a19 = 'condition';
  let a20 = 'associate';
  // let a21 = 'identify';
  // let a22 = 'eligible';
  // let a23 = 'excellent';
  // let a24 = 'impressed';
  // let a25 = 'achievement';
  // let a26 = 'position';
  // let a27 = 'reference';
  // let a28 = 'training';
  // let a29 = 'hire';
  // let a30 = 'interview';
  // let a31 = 'professional';
  // let a32 = 'highly';
  // let a33 = 'confidence';
  // let a34 = 'candidate';
  // let a35 = 'qualified';
  // let a36 = 'meet';
  // let a37 = 'requirement';
  // let a38 = 'applicant';
  // let a39 = 'opening';
  // let a40 = 'resume';



  let aList = [];
  // 팔렸는지(1 존재, 0 없음), 영단어, 뜻, 사진

  aList.push([1, a1, '임금,급료', 'https://www.worklawyers.com/assets/media/employee-minimum-wage-california-1600x1200.png']);
  aList.push([1, a2, '직업', 'https://www.shutterstock.com/image-vector/people-group-different-occupation-profession-260nw-1935560395.jpg']);
  aList.push([1, a3, '증명서,증명', 'https://www.actfl.org/uploads/images/general/Opi-tester-certificate-sample.jpg']);
  aList.push([1, a4, '(신입사원 등을) 모집하다', 'https://www.intelligentcio.com/me/wp-content/uploads/sites/12/2018/11/Recruitment-1000-600x344.png']);
  aList.push([1, a5, '임금 대장,급료 명부', 'https://cdn.educba.com/academy/wp-content/uploads/2019/07/Payroll-in-Excel.png']);
  aList.push([1, a6, '학위', 'https://imageio.forbes.com/specials-images/imageserve/6012d1658ec58b0085e29334/0x0.jpg?format\u003djpg\u0026width\u003d1200']);
  aList.push([1, a7, '자격을 주다', 'https://thefrontofthejersey.files.wordpress.com/2014/03/entitle-1.jpg']);
  aList.push([1, a8, '고문,컨설턴트', 'https://blog.hubspot.com/hubfs/how-to-become-a-consultant.jpg']);
  aList.push([1, a9, '걱정하는,염려하는', 'http://www.lawfordmead.essex.sch.uk/blogs/wp-content/uploads/2019/03/Capture.png']);
  aList.push([1, a10, '~을 전공하다,전문적으로 다루다', 'https://study.com/cimages/videopreview/2.45_102224.jpg']);
  aList.push([1, a11, '관심을 끌다,매력적이다', 'https://cdn.firespring.com/images/5dd81e02-d95c-46cd-ae4f-1f6bf20697d4.jpg']);
  aList.push([1, a12, '장래의,미래의', 'https://cdn-bcmawriter.pressidium.com/wp-content/uploads/2021/08/Definition-Of-Prospective.jpg']);
  aList.push([1, a13, '숙달,능숙', 'https://acornlms.com/wp-content/uploads/2022/06/Three-steps-to-develop-more-proficient-employees-1024x628.png']);
  aList.push([1, a14, '익숙한,친숙한', 'https://images.liverpoolmuseums.org.uk/styles/dynamic/public/2020-10/Witches-story-1.jpg']);
  aList.push([1, a15, '성실한', 'https://image.shutterstock.com/image-vector/vector-illustration-material-business-woman-260nw-1958515078.jpg']);
  aList.push([1, a16, '관리의', 'https://res.cloudinary.com/people-matters/image/upload/q_auto,f_auto/v1644300581/1644300580.jpg']);
  aList.push([1, a17, '~이 없다;부족', 'https://www.cambridge.org/elt/blog/wp-content/uploads/2020/02/puzzle-693865_1920-e1581544845761.jpg']);
  aList.push([1, a18, '고용', 'https://www.airswift.com/hubfs/pexels-sora-shimazaki-5668863-1.jpg']);
  aList.push([1, a19, '조건', 'https://www.spectatornews.com/wp-content/uploads/2020/03/Main_goodcondition2.0WEB-900x450.jpg']);
  aList.push([1, a20, '관련시키다', 'https://www.pridestafffinancial.com/wp-content/uploads/sites/2/2019/09/October-2019-What-does-associate-level-mean.png']);
  // aList.push([1, a21]);
  // aList.push([1, a22]);
  // aList.push([1, a23]);
  // aList.push([1, a24]);
  // aList.push([1, a25]);
  // aList.push([1, a26]);
  // aList.push([1, a27]);
  // aList.push([1, a28]);
  // aList.push([1, a29]);
  // aList.push([1, a30]);
  // aList.push([1, a31]);
  // aList.push([1, a32]);
  // aList.push([1, a33]);
  // aList.push([1, a34]);
  // aList.push([1, a35]);
  // aList.push([1, a36]);
  // aList.push([1, a37]);
  // aList.push([1, a38]);
  // aList.push([1, a39]);
  // aList.push([1, a40]);



  let input0 = "0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";
  let inputListBig = [];
  let inputListBig2 = [];

  let aPosList = [];

  tenQuizMake(aList);
  tableMake(inputListBig);


  let width = 0;
  let height = 0;
  for (let i = 0; i < inputListBig2[0].length; i++) {
    if (inputListBig2[0][i].length >= width) {
      width = inputListBig2[0][i].length;
    }
    height = inputListBig2[0].length;
  }

  let aIdList = [];
  let aIdCount = 1;
  // num, 세로인지 1, 가로인지 0, 시작tbId , 길이, 풀렸는지(0) 안풀렸는지(1) 푸는중인지(2)
  for (let i = 0; i < aPosList.length; i++) {
    if (aPosList[i][1] == aPosList[i][2]) {
      // 세로
      let alp = '';
      let alpHw = '';
      let alpImg = '';
      for(let j = aPosList[i][3] ; j <= aPosList[i][4]; j++){
          alp += inputListBig2[0][j].charAt(aPosList[i][1]);
      }
      for(let k = 0; k < aList.length; k++){
        if(aList[k][1] == alp){
          alpHw = aList[k][2];
          alpImg = aList[k][3];
        }
      }
      aIdList.push([aIdCount, 1, ((width) * aPosList[i][3] + aPosList[i][1]), (aPosList[i][4] - aPosList[i][3] + 1), 1, alpHw, alpImg]);

    } else {
      // 가로
      let alp = '';
      for(let j = aPosList[i][1] ; j <= aPosList[i][2]; j++){
        alp += inputListBig2[0][aPosList[i][3]].charAt(j);
      }
      for(let k = 0; k < aList.length; k++){
        if(aList[k][1] == alp){
          alpHw = aList[k][2];
          alpImg = aList[k][3];
        }
      }
      aIdList.push([aIdCount, 0, ((width) * aPosList[i][3] + aPosList[i][1]), (aPosList[i][2] - aPosList[i][1] + 1), 1, alpHw, alpImg])
    }

    aIdCount++;
  }


  console.log(aIdList);




  let input = '';
  let count = 0;
  for (let i = 0; i < height; i++) {
    input += "<tr>";
    for (let j = 0; j < width; j++) {

      try {
        if (inputListBig2[0][i].charAt(j) != 0) {
          input += "<td id='tb" + count + "'>";
          input += "<span hidden='hidden' id='ans" + count + "'>";
          input += inputListBig2[0][i].charAt(j);
          input += "</span>";
        } else {
          input += "<td id='tb" + count + "' class='table-secondary'>";
        }
      } catch (error) {
        input += "<td id='tb" + count + "' class='table-secondary'>";
      }
      + "</span>";
      count++;
    }
    input += "</tr>";
  }
  $('#tb').append(input);




  for (let i = 0; i < aIdList.length; i++) {


    if($('#tb' + aIdList[i][2] + ' .tbDiv').length == 1 ){
      // <div class="spinner-border text-primary" role="status">
      //   <span class="visually-hidden">Loading...</span>
      // </div>

      $('#tb' + aIdList[i][2]).append('<a href="javascript:void(0);"><div id="tbDiv' + i + '" class="tbDiv" style="margin-left:27px;" role="status" onmousedown="inputMake(' + i + ')" ><span hidden="hidden">'+i+'</span></div></a>');
    }else if($('#tb' + aIdList[i][2] + ' .tbDiv').length > 1){
      $('#tb' + aIdList[i][2]).append('<a href="javascript:void(0);"><div id="tbDiv' + i + '" class="tbDiv" style="margin-left:13.5px;" role="status" onmousedown="inputMake(' + i + ')" ><span hidden="hidden">'+i+'</span></div></a>');
    }else{
      $('#tb' + aIdList[i][2]).append('<a href="javascript:void(0);"><div id="tbDiv' + i + '" class="tbDiv" role="status" onmousedown="inputMake(' + i + ')" ><span hidden="hidden">'+i+'</span></div></a>');
    }
  }

  let divCard = '';
  let tbDiv0 = null;

  $('.tbDiv').hover(function (e){

  let aIdNumber = $(this).html().toString().substring($(this).html().toString().indexOf('>')+1, $(this).html().toString().indexOf('<',3));

    if(tbDiv0 != this){
    $('#divCard').click();
    divCard= '';
    }

    $(".spinner-border").css({"width" : "20px"});
    $(".spinner-border").css({"height" : "20px"});
    $(".spinner-border").css({"background-color" : "#0d6efd"});
    $(".spinner-border").removeClass("spinner-border text-primary");

    $(this).addClass("spinner-border text-primary");
    $(this).css({"display" : "block"});
    $(this).css({"background-color" : "white"});
    $(this).css({"width" : "10px"});
    $(this).css({"height" : "10px"});

    let aa = Math.round($('.section').offset().left);
    let bb = Math.round($(this).offset().left);
    let cc = Math.round($(this).offset().top);
    let dd = Math.round(e.screenY);



    if(tbDiv0 != this){
    if((bb-aa) >= 420){

      if(divCard == ''){
        divCard += '<div class="alert alert-light border-light alert-dismissible fade show divCard1" style="left: '+ (aa + (bb-aa -435)) +'px; top: '+ (cc-67) +'px;" role="alert">\n' +
                '      <img src="'+ aIdList[aIdNumber][6] +'" style="width: 300px; height: 180px;">' +
                '      <hr>\n' +
                '      <p class="mb-0">'+ aIdList[aIdNumber][5]+'</p>\n' +
                '      <button id="divCard" type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close" onmousedown="divCardClose()"></button>\n' +
                '    </div>';
        $('#main').append(divCard);
      }
    }else{

      if(divCard == '') {
        if (dd <= 500) {
          divCard += '<div class="alert alert-light border-light alert-dismissible fade show divCard1" style="left: ' + (bb + 15) + 'px; top: ' + (cc) + 'px;" role="alert">\n' +
                  '      <img src="'+ aIdList[aIdNumber][6] +'" style="width: 300px; height: 180px;">' +
                  '      <hr>\n' +
                  '      <p class="mb-0">'+ aIdList[aIdNumber][5]+'</p>\n' +
                  '      <button id="divCard" type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close" onmousedown="divCardClose()"></button>\n' +
                  '    </div>';
          $('#main').append(divCard);
        } else {
          divCard += '<div class="alert alert-light border-light alert-dismissible fade show divCard1" style="left: ' + (bb + 15) + 'px; top: ' + (cc - 345) + 'px;" role="alert">\n' +
                  '      <img src="'+ aIdList[aIdNumber][6] +'" style="width: 300px; height: 180px;">' +
                  '      <hr>\n' +
                  '      <p class="mb-0">'+ aIdList[aIdNumber][5]+'</p>\n' +
                  '      <button id="divCard" type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close" onmousedown="divCardClose()"></button>\n' +
                  '    </div>';
          $('#main').append(divCard);
        }
      }
    }
    }

    tbDiv0 = this;

  }
  //   ,function(){
  //   $(this).removeClass("spinner-grow text-primary");
  //
  // }
  );


  // 예외처리(초기화)
  $('.table-secondary').on({
    'click': function (e) {

      tbDiv0 = null;
      $('#divCard').click();
      divCard= '';
      $(".spinner-border").css({"width" : "20px"});
      $(".spinner-border").css({"height" : "20px"});
      $(".spinner-border").css({"background-color" : "#0d6efd"});
      $(".spinner-border").removeClass("spinner-border text-primary");
      $('.aInput').remove();
      for (let i = 0; i < aIdList.length; i++) {

        if (aIdList[i][4] == 0) { // 풀림

        } else {   // 안풀림
          if ($('#tbDiv' + i).length <= 0) {
            $('#tb' + i).append('<a href="javascript:void(0);"><div id="tbDiv' + i + '" class="tbDiv" style="margin-left:27px;" role="status" onmousedown="inputMake(' + i + ')">&nbsp;</div></a>');
          }
        }
      }
    }
  });
  $(document).keydown(function (e) {
    if (e.keyCode == 27 || e.which == 27) {
      tbDiv0 = null;
      $('#divCard').click();
      divCard= '';
      $('.aInput').remove();
      for (let i = 0; i < aIdList.length; i++) {

        if (aIdList[i][4] == 0) { // 풀림

        } else {   // 안풀림
          if ($('#tbDiv' + i).length <= 0) {
            $('#tb' + i).append('<a href="javascript:void(0);"><div id="tbDiv' + i + '" class="tbDiv" style="margin-left:27px;" role="status" onmousedown="inputMake(' + i + ')">&nbsp;</div></a>');
          }
        }
      }
    }
  });

  // 십자 말풀이 만들기 -> 결과값 : inputListBig
  function tenQuizMake(list) {
    // 만들기 완료
    let num0 = 1;
    let listBool = true;
    while (listBool) {

      // 모두 쓰이면 종료
      listBool = false;
      for (let i = 0; i < aList.length; i++) {
        if (aList[i][0] == 1) {
          listBool = true;
          num0 = i;
        }
      }
      if (!listBool) {
        break;
      }
      let inputList = [];

      for (let i = 0; i < 100; i++) {
        inputList.push(input0);
      }

      inputList[50] = inputList[50].substring(0, (50 - Math.floor(aList[num0][1].length / 2))) + aList[num0][1] + inputList[50].substring((50 + Math.ceil(aList[num0][1].length / 2)), 100);
      aList[num0][0] = 0;
      // 맨앞, 맨뒤 위치 넣기 (추후에 단어 묶음 위해) inputPage, x1 , x2, y1, y2
      aPosList.push([inputListBig.length, (50 - Math.floor(aList[num0][1].length / 2)), (50 + Math.ceil(aList[num0][1].length / 2) - 1), 50, 50]);
      let aListCount = 0;
      for (let i = 0; i < aList.length; i++) {

        if (aList[i][0] == 0) {
          continue;
        }

        if (aListCount > 7) {
          aListCount = 0;
          break;
        }

        for (let j = 0; j < inputList.length; j++) {  // y 좌표계

          for (let k = 0; k < aList[i][1].length; k++) {   // 단어 알파벳

            if (inputList[j].indexOf(aList[i][1].charAt(k)) != -1) {  // 알파벳이 포함될 때

              for (let f = 0; f < 100; f++) {    // x 좌표계

                if (inputList[j].charAt(f) == aList[i][1].charAt(k)) {
                  console.log("3");
                  if (inputList[j].charAt(f - 1) != 0 || inputList[j].charAt(f + 1) != 0) { // 가로일 때

                    if (j - 1 < 0 ? false : inputList[j - 1].charAt(f) != 0 || j + 1 >= inputList.length ? false : inputList[j + 1].charAt(f) != 0) {
                      // 정한 위치가 십자모양일 때
                      continue;
                    } else {
                      if ((j - 1 < 0 ? false : inputList[j - 1].charAt(f - 1) != 0) || (j - 1 < 0 ? false : inputList[j - 1].charAt(f + 1) != 0) || (j + 1 >= inputList.length ? false : inputList[j + 1].charAt(f - 1) != 0) || (j + 1 >= inputList.length ? false : inputList[j + 1].charAt(f + 1) != 0)) {
                        // 다른 블럭과 붙어있을 때
                        continue;
                      }


                      // 가능한 위치
                      // 넣기전에 확인, 맨 끝 두 곳에서 추가 연결이 되어있는지
                      let indexBe = k - 0;
                      let indexAf = aList[i][1].length - k;
                      if (j - indexBe - 1 < 0 ? false : inputList[j - indexBe - 1].charAt(f) != 0 || j + indexAf >= inputList.length + 1 ? false : inputList[j + indexAf - 1].charAt(f) != 0) {
                        // 추가연결이 되어있을 때
                        continue;
                      } else {

                        // 추가 위치
                        // 추가 위치에 길에 영어 끼어있을 때, 같은 영어로 연결 되는지 확인
                        let num01 = 0;
                        let passBool = true;
                        for (let e = j - indexBe; e < j + indexAf;) {
                          let aListChar = aList[i][1].charAt(num01);

                          if (inputList[e].charAt(f) != aListChar && inputList[e].charAt(f) != 0) {
                            // 길목에 영어가 끼어 있는데 다를 때
                            passBool = false;
                          } else {
                          }
                          if (inputList[e].charAt(f) == 0 && (inputList[e].charAt(f - 1) != 0 || inputList[e].charAt(f + 1) != 0)) {
                            // 길목에 영어가 안끼어 있는데 좌우에 단어가 있을 때
                            passBool = false;
                          } else {
                          }

                          num01++;
                          e++;
                          if (num01 >= aList[i][1].length) {
                            break;
                          }
                        }

                        if (!passBool) {
                          break;
                        }

                        let num00 = 0;
                        // 맨앞, 맨뒤 위치 넣기 (추후에 단어 묶음 위해) inputPage, x1 , x2, y1, y2
                        aPosList.push([inputListBig.length, f, f, (j - indexBe), (j + indexAf - 1)]);
                        for (let e = j - indexBe; e < j + indexAf;) {

                          let aListChar = aList[i][1].charAt(num00);
                          inputList[e] = inputList[e].substring(0, f) + aListChar + inputList[e].substring(f + 1, inputList[e].length);

                          num00++;
                          e++;
                          if (num00 >= aList[i][1].length) {
                            break;
                          }
                        }
                        // 넣기 완료. 추가사항(다음 단어로, )
                        k = aList[i][1].length + 1;
                        j = inputList.length + 1;
                        aList[i][0] = 0;
                        aListCount++;
                        break;
                      }
                    }
                  } else {  // 세로일 때


                    if (f - 1 < 0 ? false : inputList[j].charAt(f - 1) != 0 || f + 1 > 100 ? false : inputList[j].charAt(f + 1) != 0) {
                      // 정한 위치가 십자모양일 때
                      continue;
                    } else {
                      if ((f - 1 < 0 ? false : inputList[j - 1].charAt(f - 1) != 0) || (f - 1 < 0 ? false : inputList[j + 1].charAt(f - 1) != 0) || (f + 1 > 100 ? false : inputList[j - 1].charAt(f + 1) != 0) || (f + 1 > 100 ? false : inputList[j + 1].charAt(f + 1) != 0)) {
                        // 다른 블럭과 붙어있을 때
                        continue;
                      }


                      // 가능한 위치
                      // 넣기전에 확인, 맨 끝 두 곳에서 추가 연결이 되어있는지
                      let indexBe = k - 0;
                      let indexAf = aList[i][1].length - k;
                      if (f - indexBe - 1 < 0 ? false : inputList[j].charAt(f - indexBe - 1) != 0 || f + indexAf > 100 ? false : inputList[j].charAt(f + indexAf - 1) != 0) {
                        // 추가연결이 되어있을 때
                        continue;
                      } else {

                        // 추가 위치
                        // 추가 위치에 길에 영어 끼어있을 때, 같은 영어로 연결 되는지 확인
                        let num01 = 0;
                        let passBool = true;
                        for (let e = f - indexBe; e < f + indexAf;) {
                          let aListChar = aList[i][1].charAt(num01);

                          if (inputList[j].charAt(e) != aListChar && inputList[j].charAt(e) != 0) {
                            // 길목에 영어가 끼어 있는데 다를 때
                            passBool = false;
                          } else {
                          }

                          if (inputList[j].charAt(e) == 0 && (inputList[j - 1].charAt(e) != 0 || inputList[j + 1].charAt(e) != 0)) {
                            // 길목에 영어가 안끼어 있는데 위아래에 단어가 있을 때
                            passBool = false;
                          } else {
                          }


                          num01++;
                          e++;
                          if (num01 >= aList[i][1].length) {
                            break;
                          }
                        }

                        if (!passBool) {
                          break;
                        }

                        // 맨앞, 맨뒤 위치 넣기 (추후에 단어 묶음 위해) inputPage, x1 , x2, y1, y2
                        aPosList.push([inputListBig.length, (f - indexBe), (f + indexAf - 1), j, j]);

                        // 가로 줄에 값 넣기
                        inputList[j] = inputList[j].substring(0, f - indexBe) + aList[i][1] + inputList[j].substring(f + indexAf, inputList[j].length);

                        // 넣기 완료. 추가사항(다음 단어로, )
                        k = aList[i][1].length + 1;
                        j = inputList.length + 1;
                        aList[i][0] = 0;
                        aListCount++;
                        break;
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }

      // 가능한 단어 모두 넣기 완료
      inputListBig.push(inputList);
    }
  }

  // 십자 말풀이 떼어내기 -> 결과값 : inputListBig2
  function tableMake(list) {

    let xPosB = 0;
    let yPosB = 0;
    let xPosS = 100;
    let yPosS = 100;
    let totHeight = 0;
    let inputList = [];
    for (let i = 0; i < list.length; i++) {
      for (let j = 0; j < list[i].length; j++) {
        for (let k = 0; k < list[i][j].length; k++) {
          if (list[i][j].charAt(k) != 0) {

            if (yPosS >= j) {
              yPosS = j;
            }
            if (xPosS >= k) {
              xPosS = k;
            }
            if (yPosB <= j) {
              yPosB = j;
            }
            if (xPosB <= k) {
              xPosB = k;
            }
          }

        }
      }

      for (let e = yPosS - 1; e < yPosB + 2; e++) {
        inputList.push(list[i][e].substring(xPosS - 1, xPosB + 2));
      }

      for (let w = 0; w < aPosList.length; w++) {
        if (aPosList[w][0] == i) {
          aPosList[w][1] = aPosList[w][1] - xPosS + 1;
          aPosList[w][2] = aPosList[w][2] - xPosS + 1;
          aPosList[w][3] = aPosList[w][3] - yPosS + 1 + totHeight;
          aPosList[w][4] = aPosList[w][4] - yPosS + 1 + totHeight;




        }
      }
      totHeight += (yPosB - yPosS) + 3;

      xPosB = 0;
      yPosB = 0;
      xPosS = 100;
      yPosS = 100;

    }
    inputListBig2.push(inputList);
  }

  // 십자 말풀이 정답 입력칸 만들기
  function inputMake(num) {

    for (let i = 0; i < aIdList.length; i++) {

      if (aIdList[i][4] == 0) { // 풀림

      } else {   // 안풀림
        if ($('#tbDiv' + i).length <= 0) {
          $('#tb' + aIdList[i][2]).append('<a href="javascript:void(0);"><div id="tbDiv' + i + '" class="tbDiv" style="margin-left:27px;" role="status" onmousedown="inputMake(' + i + ')">&nbsp;</div></a>');
        }
      }
    }

    let alpLen = aIdList[num][3];
    let tbNum = aIdList[num][2];

    $('.aInput').remove();

    let inputCount = 0;
    let ansList = [];
    if (aIdList[num][1] == 1) {   // 세로일 때
      for (let i = tbNum; i < tbNum + (width * (alpLen - 1)) + 1; i = i + width) {
        ansList.push($('#ans' + i).html());

        if ($('#rst' + i).length > 0) {    // 길목에 정답이 존재할 때
          $('#tb' + i).append('<input id="inputt' + inputCount + '" type="text" hidden="hidden" class="aInput" maxlength="1" value="'+ $('#rst' + i).text() +'">');
        } else {  // 정상 작동
          $('#tb' + i).append('<input id="input' + inputCount + '" type="text" class="aInput" maxlength="1" >');
        }

        inputCount++;
      }
    } else {  // 가로일 때
      for (let i = tbNum; i < tbNum + (alpLen); i++) {
        ansList.push($('#ans' + i).html());

        if ($('#rst' + i).length > 0) {    // 길목에 정답이 존재할 때
          $('#tb' + i).append('<input id="inputt' + inputCount + '" type="text" hidden="hidden" class="aInput" maxlength="1" value="'+ $('#rst' + i).text() +'">');
        } else {  // 정상 작동
          $('#tb' + i).append('<input id="input' + inputCount + '" type="text" class="aInput" maxlength="1" >');
        }

        inputCount++;
      }
    }
    console.log(ansList);

    if($('#input0').length <= 0){

      if($('#input1').length <= 0){
        let setInt =setInterval(function (){$('#input2').focus(); clearInterval(setInt);},50);
      }else if($('#input2').length <= 0){
        let setInt =setInterval(function (){$('#input3').focus(); clearInterval(setInt);},50);
      }else{
        let setInt =setInterval(function (){$('#input1').focus(); clearInterval(setInt);},50);
      }

    }else{
      let setInt =setInterval(function (){$('#input0').focus(); clearInterval(setInt);},50);
    }


    for (let i = 0; i <= inputCount; i++) {
      $('#input' + i).on({
        'keyup': function (e) {
          if (/[a-zA-Z]/g.test(e.key) && e.key.length == 1) {

            console.log($('#input' + i).length);
            if($('#input' + (i+1)).length <= 0 && i != aIdList[num][3]-1){
              $('#input' + (i)).val(e.key);
              i++;
            }
            $('#input' + (i)).val(e.key);
            $('#input' + (i + 1)).focus();


            let sum = 0;
            for (let j = 0; j < $('.aInput').length; j++) {
              if ($('.aInput').get(j).value == '') {
                sum++;
              }
            }

            if (sum == 0) {     // 모든 칸 입력

              let length = $('.aInput').length;
              let dd = [];

              $('#tb').css({ 'border': '#0d6efd solid 1.2px' });
              for (let k = 0; k < length; k++) {
                console.log($('.aInput').get(k).value);
                dd.push($('.aInput').get(k).value);
              }

              console.log(dd);
              let eCount = 0;

              if(aIdList[num][1]==1){     // 세로일 때
                for (let e = tbNum; e < tbNum + (width * (alpLen - 1)) + 1; e = e + width) {
                  if (ansList.toString().replaceAll(',', '') == dd.toString().replaceAll(',', '')) {
                    // 정답 맞춤
                    tbDiv0 = null;
                    $('#divCard').click();
                    divCard= '';
                    $('#tbDiv' + num).remove();
                    $('.aInput').remove();
                    if($('#rst' + e).length > 0){   // 값이 이미 있으면

                    }else{  // 없으면, 정상 작동
                      $('#tb' + e).append('<span id="rst' + e + '">' + dd[eCount] + '</span>');
                    }
                    $('#tb' + e).css({ 'border': '#0d6efd solid 1.5px' });
                    aIdList[num][4] = 0;
                    eCount++;
                  }
                }
              }else{      // 가로일 때
                for (let e = tbNum; e < tbNum + (alpLen); e++) {
                  if (ansList.toString().replaceAll(',', '') == dd.toString().replaceAll(',', '')) {
                    // 정답 맞춤
                    tbDiv0 = null;
                    $('#divCard').click();
                    divCard= '';
                    $('#tbDiv' + num).remove();
                    $('.aInput').remove();
                    if($('#rst' + e).length > 0){   // 값이 이미 있으면

                    }else{  // 없으면, 정상 작동
                      $('#tb' + e).append('<span id="rst' + e + '">' + dd[eCount] + '</span>');
                    }

                    $('#tb' + e).css({ 'border': '#0d6efd solid 1.5px' });
                    aIdList[num][4] = 0;
                    eCount++;
                  }
                }
              }


            }



          }


        }
      });
    }
    for (let i = 0; i < inputCount; i++) {
      $('#input' + i).on({
        'keyup': function (e) {

          if (e.keyCode === 8) {

            
            console.log($('#input' + (i-1)).length);
            if($('#input' + (i-1)).length <= 0 && i != 0){
              $('#input' + i).val('');
              i--;
            }else{
              $('#input' + i).val('');
            }
            $('#input' + (i - 1)).focus();

            let sum = 0;
            for (let i = 0; i < $('.aInput').length; i++) {
              if ($('.aInput').get(i).value == '') {
                sum++;
              }
            }
            if (sum != 0) {
              $('#tb').css({ 'border': 'solid 1px' });
            }

          }
        }
      });
    }

  }

  function divCardClose(){
    divCard = '';
  }
let voca = aList[Math.floor(Math.random()*19)][1];
    let vocaLen = voca.length;
    let vocaList = new Array();
    let input00 = '';
    input00 += '<div id="light"></div>';

    for (let i = 0; i < vocaLen; i++) {
        vocaList.push(voca.charAt(i));
        input00 += '<img src="./알파벳/' + voca.charAt(i).toUpperCase() + '.png" alt="" class="alpha" id="alpha' + i + '">'
    }
    $('body').append(input00);

    for (let i = 0; i < vocaLen; i++) {
        $('#alpha' + i).css("left", 500 + i * 18 + 'px');
    }
    const a = document.getElementById('alpha0');

    let big = 5;   // 질량, 크기(반지름)
    let eX = [];      // 마우스 x위치
    let eY = [];      // 마우스 y위치
    let xLen = [];       // x 탄성길이
    let yLen = [];       // y 탄성길이
    let k = 2;        // 탄성계수
    let mu = 0.1;       // 마찰계수
    let g = 9.81;       // 중력가속도
    let damping = mu * g * big * 0;    // 마찰력
    let xForce = [];     // x 총힘
    let yForce = [];     // y 총힘
    let xball = [];
    let yball = [];
    let deg = 0;
    let light = document.getElementById("light");
    let radius = 67.5;
    let xSin = 0;
    let ySin = 0;

    function move() {
        for (let i = 0; i < vocaLen; i++) {
            xLen[i] = (eX[i] - $('#alpha' + i).offset().left);
            yLen[i] = (eY[i] - $('#alpha' + i).offset().top);
            if (xLen[i] > 0) {
                xForce[i] = xLen[i] * k - damping;
                if (xForce[i] < 0) {
                    xForce[i] = 0;
                }
            } else if (xLen[i] < 0) {
                xForce[i] = xLen[i] * k + damping;
                if (xForce[i] > 0) {
                    xForce[i] = 0;
                }
            } else {
                xForce[i] = 0;
            }
            if (yLen[i] > 0) {
                yForce[i] = yLen[i] * k - damping;
                if (yForce[i] < 0) {
                    yForce[i] = 0;
                }
            } else if (yLen[i] < 0) {
                yForce[i] = yLen[i] * k + damping;
                if (yForce[i] > 0) {
                    yForce[i] = 0;
                }
            } else {
                yForce[i] = 0;
            }
        }
        deg = getAngle($('#alpha0').offset().left, $('#alpha0').offset().top, eX[0] - 50, eY[0] - 20) + 180;

        light.style.rotate = deg + "deg";
        light.style.left = (Number(a.style.left.substring(0, a.style.left.length - 2))) - radius * Math.sin(deg * Math.PI / 180) + "px";
        light.style.top = (Number(a.style.top.substring(0, a.style.top.length - 2))) + radius * Math.cos(deg * Math.PI / 180) + "px";

        for (let i = 0; i < vocaLen; i++) {
            $('#alpha' + i).css('left', xball[i] + xForce[i] * 0.1 * 0.2 + 22 + 'px');
            $('#alpha' + i).css('top', yball[i] + yForce[i] * 0.1 * 0.2 + 'px');
            $('#alpha' + i).css('rotate', deg - 90 + "deg");
            if (i != 0) {
                xball[i] = $('#alpha' + (i - 1)).offset().left;
                yball[i] = $('#alpha' + (i - 1)).offset().top;
            } else {
                xball[i] = $('#alpha' + i).offset().left;
                yball[i] = $('#alpha' + i).offset().top;
            }
        }
    }

    repeatMove();

    function repeatMove() {  // 프레임 1초에 60번, 0.017초 마다/ 0.25초에 15번

        requestAnimationFrame(move);
        requestAnimationFrame(repeatMove);

    }

    function getAngle(x1, y1, x2, y2) {
        let a;
        if (y1 == y2) {
            if (x2 < x1) {
                a = -90;
            } else {
                a = 90;
            }
        } else if (x1 == x2 && y2 > y1) {
            a = 180;
        } else {
            const rad = Math.atan((x2 - x1) / (y1 - y2));
            a = rad * 180 / Math.PI;

            if (y2 > y1 && x2 > x1) {
                a = 180 + a;
            } else if (y2 > y1 && x2 < x1) {
                a = -180 + a;
            }
        }
        return a;
    }

    window.addEventListener('mousemove', function (e) {
        for (let i = 0; i < vocaLen; i++) {
            if (i == 0) {
                eX[i] = e.pageX - 410;
                eY[i] = e.pageY + 80;
            } else {
                eX[i] = $('#alpha' + (i - 1)).offset().left;
                eY[i] = $('#alpha' + (i - 1)).offset().top;
            }
        }
        for (let i = 0; i < vocaLen; i++) {

            if (i > 0) {
                xball[i] = $('#alpha' + (i - 1)).offset().left;
                yball[i] = $('#alpha' + (i - 1)).offset().top;
            } else {
                xball[i] = $('#alpha' + i).offset().left;
                yball[i] = $('#alpha' + i).offset().top;
            }
        }
    })

</script>

</body>

</html>
